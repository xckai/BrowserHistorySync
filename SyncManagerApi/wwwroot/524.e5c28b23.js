(globalThis.webpackChunkreact_simple=globalThis.webpackChunkreact_simple||[]).push([[524],{52048:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var r=a(73763),n=a(62632),i=a(55495);function o(){return n.createElement(l,null,n.createElement(c,{src:i.Z}),n.createElement(s,null,"BrowserHistorySync"))}var l=(0,r.ZP)("div").withConfig({displayName:"Logo___StyledDiv",componentId:"sc-1c72t62-0"})(["margin-top:.3rem;width:100%;height:2.5rem;display:flex;align-items:center;border-bottom:1px #ddd solid;"]),c=(0,r.ZP)("img").withConfig({displayName:"Logo___StyledImg",componentId:"sc-1c72t62-1"})(["margin:0 .5rem;height:1.8rem;"]),s=(0,r.ZP)("span").withConfig({displayName:"Logo___StyledSpan",componentId:"sc-1c72t62-2"})(["font-size:90%;font-weight:bold;letter-spacing:0.0625em;color:#5b5b5b;"])},2385:(e,t,a)=>{"use strict";a.d(t,{H:()=>b}),a(91283);var r=a(60203),n=(a(32390),a(81557)),i=(a(54911),a(46481)),o=(a(2409),a(38466)),l=(a(96680),a(85460)),c=(a(37169),a(19059),a(83584)),s=a(62632),d=a(82861),m=a(53586),p=a(55274),u=a(17854),g=a(29840),y=a.n(g),f=a(73763);const h=(0,f.ZP)(c.default).withConfig({displayName:"SearchListGroup__StyledList",componentId:"sc-606ry-0"})(["margin:0.5rem 0rem;"]),S=(0,f.ZP)(c.default.Item).withConfig({displayName:"SearchListGroup__StyledListItem",componentId:"sc-606ry-1"})(["padding:8px 8px 8px 16px !important;.close_btn{visibility:hidden;opacity:0.3;}&:hover{background-color:#e6e5e5;border-radius:3px;.close_btn{visibility:visible;&:hover{color:#40a9ff;opacity:0.9;cursor:pointer;}}}.item_container{display:flex;justify-content:space-between;width:100%;align-items:center;.ant-avatar{min-width:1rem;min-height:1rem !important;width:1rem !important;height:1rem !important;margin-right:0.5rem !important;}}"]);function v(e){return s.createElement(S,{onClick:()=>{e.onClick(e.data)},title:`${e.data.equipmentName} ${y()(e.data.timestamp).format("YYYY-MM-DD HH:mm ")} \n ${e.data.url}`},s.createElement("div",{className:"item_container"},s.createElement(E,{src:e.data.faviconUrl,$_css:e.data.faviconUrl?0:"50%"}),s.createElement("div",{style:{flex:1,width:"calc(100% - 1.7rem)"}},s.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"}},s.createElement("span",{style:{flex:1,fontSize:"90%"}},e.data.title))),s.createElement(d.Z,{className:"close_btn",onClick:t=>{t.preventDefault(),t.stopPropagation(),e.onDeleteBtnClick(e.data)}})))}function w(e){return s.createElement(s.Fragment,null,s.createElement(I,{plain:!0,key:e.groupTitle},e.groupTitle),e.items.map(((t,a)=>s.createElement(v,{data:t,key:t.url+" "+a,onClick:e.onClick,onClickEquipmentTag:e.onClickEquipmentTag,onDeleteBtnClick:e.onDeleteItem}))))}let C=0;function b(e){const[t,a]=(0,s.useState)([]),[r,c]=(0,s.useState)(!1);let[d,g]=(0,s.useState)(""),[f,S]=(0,s.useState)({total:0,current:1});const v=(0,s.useRef)();function b(e){}function E(e){e.id&&u.K.deleteHistoryItem(e.id).then((r=>{let n=t.filter((t=>t.id!==e.id));l.default.success("删除成功"),a([...n])})).catch((e=>{console.error(e),l.default.error(e.message)}))}return(0,s.useEffect)((()=>{c(!0),async function(){u.K.queryHistoryList({keyword:"",pageIndex:f.current,pageSize:e.pageSize}).then((e=>{S({total:e.data.total,current:e.data.current}),a(e.data?.data),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)}))}(),v&&v.current?.focus()}),[]),s.createElement(x,{className:e.className},s.createElement(k,null,s.createElement(o.default,{ref:v,size:"large",placeholder:"搜索历史访问记录",allowClear:!0,value:d,prefix:s.createElement(m.Z,null),onChange:t=>{let r=t.target.value;g(r),function(t){c(!0),a([]),C&&(clearTimeout(C),C=0),C=setTimeout((function(){u.K.queryHistoryList({keyword:t,pageIndex:1,pageSize:e.pageSize}).then((e=>{S({total:e.data.total,current:e.data.current}),a(e.data?.data),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)}))}),500)}(r)}})),s.createElement(D,{id:"scrollableDiv"},s.createElement(p.Z,{dataLength:t.length,next:function(){r||(c(!0),u.K.queryHistoryList({keyword:d,pageIndex:f.current+1,pageSize:e.pageSize}).then((e=>{S({total:e.data.total,current:e.data.current}),a([...t,...e.data?.data]),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)})))},hasMore:t.length<f.total,loader:!r&&s.createElement("div",{style:{display:"flex",justifyContent:"center",alignContent:"center"}},s.createElement(i.default,null)),endMessage:!r&&s.createElement(n.Z,{plain:!0},"已经到底啦 🤐"),scrollableTarget:"scrollableDiv"},s.createElement(h,{loading:r,itemLayout:"horizontal",size:"small",dataSource:(I=t,_(I).groupBy((e=>y()(e.timestamp).format("YYYY-MM-DD A"))).map((e=>({groupTitle:y()(e[0].timestamp).format("YYYY-MM-DD A"),items:e}))).value()),renderItem:t=>s.createElement(w,{key:t.groupTitle,items:t.items,groupTitle:t.groupTitle,onClick:e.onClickItem,onClickEquipmentTag:b,onDeleteItem:E})}))));var I}var E=(0,f.ZP)(r.ZP).withConfig({displayName:"SearchListGroup___StyledAvatar",componentId:"sc-606ry-2"})(["border-radius:",";"],(e=>e.$_css)),I=(0,f.ZP)(n.Z).withConfig({displayName:"SearchListGroup___StyledDivider",componentId:"sc-606ry-3"})(["margin:0 !important;"]),x=((0,f.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv",componentId:"sc-606ry-4"})(["margin:0px 1rem 5px 1rem;"]),(0,f.ZP)("section").withConfig({displayName:"SearchListGroup___StyledSection",componentId:"sc-606ry-5"})(["display:flex;flex-direction:column;"])),k=(0,f.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv2",componentId:"sc-606ry-6"})(["margin:1rem 1rem 0.5rem 1rem;display:flex;align-items:center;justify-content:space-around;.ant-input-affix-wrapper{border-radius:2rem !important;border-radius:2rem !important;}"]),D=(0,f.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv3",componentId:"sc-606ry-7"})(["margin-top:0.5rem;flex:1;overflow:auto;"])},76294:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(73763),n=a(62632),i=a(2385),o=a(52048);function l(){return n.createElement(c,null,n.createElement("div",{className:"bar"},n.createElement(o.T,null)),n.createElement(s,{onClickItem:function(e){window.open(e.url)},pageSize:50}))}var c=(0,r.ZP)("section").withConfig({displayName:"Index___StyledSection",componentId:"sc-155ji52-0"})(["width:100%;height:100vh;background:#fff;"]),s=(0,r.ZP)(i.H).withConfig({displayName:"Index___StyledSearchListGroup",componentId:"sc-155ji52-1"})(["height:100%;height:calc(100% - 64px);"])},17854:(e,t,a)=>{"use strict";a.d(t,{K:()=>i});var r=a(52993),n=a.n(r);const i=new class{async queryHistoryList(e){return console.log(e,"searchParam"),n().get(`${window.syncManagerConfig?.dataServerUrl??""}/api/UrlHistory/Query`,{params:{pageIndex:e.pageIndex??1,pageSize:e.pageSize??15,keyword:e.keyword,dateFrom:e?.datetimeFrom?.toISOString(),dateTo:e?.datetimeTo?.toISOString(),equipments:e?.equipmentName}})}async deleteHistoryItem(e){return n().delete(`${window.syncManagerConfig?.dataServerUrl??""}/api/UrlHistory?id=${e}`)}async batchDeleteHistoryItem(e){return n().delete(`${window.syncManagerConfig?.dataServerUrl??""}/api/UrlHistory/BatchDelete`,{data:e})}}},55495:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});const r=a.p+"851378514f50d38c2b60bb0769a84f14.png"},22157:(e,t,a)=>{var r={"./en-gb":37067,"./en-gb.js":37067,"./zh-cn":5327,"./zh-cn.js":5327};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=22157}}]);