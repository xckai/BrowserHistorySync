(globalThis.webpackChunkreact_simple=globalThis.webpackChunkreact_simple||[]).push([[597],{32834:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var n=a(36817),r=a(47535);const i=a.p+"5d671c97c56c550e2d046f63f2107c8b.png";function o(){return r.createElement("div",{className:n.iv`
        width: 100%;
        height: 4rem;
        display: flex;
        border-bottom: 1px #ddd solid;
      `},r.createElement("img",{src:i,className:n.iv`
          margin: 3px 1rem;
        `}))}},88449:(e,t,a)=>{"use strict";a.d(t,{H:()=>I}),a(22068);var n=a(13027),r=(a(34373),a(62102)),i=(a(61762),a(24746)),o=(a(13781),a(10996)),l=(a(52025),a(44371)),c=(a(12291),a(22857)),s=(a(50393),a(14102)),d=a(47535),m=a(13001),u=a(15972),p=a(42738),g=a(22183),f=a.n(g);const y=new class{async queryHistoryList(e,t,a=1,n=15){return f().get(`${window.syncManagerConfig?.dataServerUrl??""}/api/UrlHistory/Query`,{params:{pageIndex:a,pageSize:n,keyword:e,dateFrom:t?.dateFrom?.toISOString(),dateTo:t?.dateTo?.toISOString(),equipments:t?.equipmentName}})}async deleteHistoryItem(e){return f().delete(`${window.syncManagerConfig?.dataServerUrl??""}/api/UrlHistory?id=${e}`)}};var h=a(82624),w=a.n(h),v=a(10255),C=a.n(v),E=a(198);const S=(0,E.ZP)(s.default).withConfig({displayName:"SearchListGroup__StyledList",componentId:"sc-606ry-0"})(["margin:0.5rem 0rem;"]),_=(0,E.ZP)(s.default.Item).withConfig({displayName:"SearchListGroup__StyledListItem",componentId:"sc-606ry-1"})(["padding:8px 8px 8px 16px !important;.close_btn{visibility:hidden;opacity:0.3;}&:hover{background-color:#e6e5e5;border-radius:3px;.close_btn{visibility:visible;&:hover{color:#40a9ff;opacity:0.9;cursor:pointer;}}}.item_container{display:flex;justify-content:space-between;width:100%;align-items:center;.ant-avatar{min-width:1rem;min-height:1rem !important;width:1rem !important;height:1rem !important;margin-right:0.5rem !important;}}"]);function x(e){return d.createElement(_,{onClick:()=>{e.onClick(e.data)},title:`${e.data.equipmentName} ${w()(e.data.timestamp).format("YYYY-MM-DD HH:mm ")} \n ${e.data.url}`},d.createElement("div",{className:"item_container"},d.createElement(T,{src:e.data.faviconUrl,$_css:e.data.faviconUrl?0:"50%"}),d.createElement("div",{style:{flex:1,width:"calc(100% - 1.7rem)"}},d.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"}},d.createElement("span",{style:{flex:1,fontSize:"90%"}},e.data.title))),d.createElement(m.Z,{className:"close_btn",onClick:t=>{t.preventDefault(),t.stopPropagation(),e.onDeleteBtnClick(e.data)}})))}function b(e){return d.createElement(d.Fragment,null,d.createElement(D,{plain:!0,key:e.groupTitle},e.groupTitle),e.items.map(((t,a)=>d.createElement(x,{data:t,key:t.url+" "+a,onClick:e.onClick,onClickEquipmentTag:e.onClickEquipmentTag,onDeleteBtnClick:e.onDeleteItem}))))}function N(e){return e.data.equipmentName||e.data.dateTo?d.createElement(M,null,d.createElement("span",{style:{marginRight:".5rem"}},"Filter:"),e.data.equipmentName&&d.createElement(c.Z,{closable:!0,onClose:()=>{e.onChange({...e.data,equipmentName:void 0})}},e.data.equipmentName),e.data.dateFrom&&d.createElement(c.Z,{closable:!0,onClose:()=>{e.onChange({...e.data,dateFrom:void 0,dateTo:void 0})}},e.data.dateFrom.format("YY/MM/DD")+"-"+e.data.dateTo.format("YY/MM/DD"))):null}let k=0;function I(e){const[t,a]=(0,d.useState)([]),[n,c]=(0,d.useState)(!1),[s,m]=(0,d.useState)({});let[g,f]=(0,d.useState)(""),[h,v]=(0,d.useState)({total:0,current:1});const E=(0,d.useRef)();function _(e){m({equipmentName:e.equipmentName})}function x(e){e.id&&y.deleteHistoryItem(e.id).then((n=>{let r=t.filter((t=>t.id!==e.id));l.default.success("删除成功"),a([...r])})).catch((e=>{console.error(e),l.default.error(e.message)}))}return(0,d.useEffect)((()=>{c(!0),async function(){y.queryHistoryList("",{},h.current,e.pageSize).then((e=>{v({total:e.data.total,current:e.data.current}),a(e.data?.data),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)}))}(),E&&E.current?.focus()}),[]),d.createElement(L,{className:e.className},d.createElement(Z,null,d.createElement(o.Z,{ref:E,size:"large",placeholder:"搜索历史访问记录",allowClear:!0,value:g,prefix:d.createElement(u.Z,null),onChange:t=>{let n=t.target.value;f(n),function(t){c(!0),a([]),k&&(clearTimeout(k),k=0),k=setTimeout((function(){y.queryHistoryList(t,s,1,e.pageSize).then((e=>{v({total:e.data.total,current:e.data.current}),a(e.data?.data),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)}))}),500)}(n)}})),d.createElement(N,{data:s,onChange:m}),d.createElement(q,{id:"scrollableDiv"},d.createElement(p.Z,{dataLength:t.length,next:function(){n||(c(!0),y.queryHistoryList(g,s,h.current+1,e.pageSize).then((e=>{v({total:e.data.total,current:e.data.current}),a([...t,...e.data?.data]),c(!1)})).catch((e=>{console.error(e),l.default.error(e.message),c(!1)})))},hasMore:t.length<h.total,loader:!n&&d.createElement("div",{style:{display:"flex",justifyContent:"center",alignContent:"center"}},d.createElement(i.default,null)),endMessage:!n&&d.createElement(r.Z,{plain:!0},"已经到底啦 🤐"),scrollableTarget:"scrollableDiv"},d.createElement(S,{loading:n,itemLayout:"horizontal",size:"small",dataSource:function(e){return C()(e).groupBy((e=>w()(e.timestamp).format("YYYY-MM-DD A"))).map((e=>({groupTitle:w()(e[0].timestamp).format("YYYY-MM-DD A"),items:e}))).value()}(t),renderItem:t=>d.createElement(b,{key:t.groupTitle,items:t.items,groupTitle:t.groupTitle,onClick:e.onClickItem,onClickEquipmentTag:_,onDeleteItem:x})}))))}var T=(0,E.ZP)(n.ZP).withConfig({displayName:"SearchListGroup___StyledAvatar",componentId:"sc-606ry-2"})(["border-radius:",";"],(e=>e.$_css)),D=(0,E.ZP)(r.Z).withConfig({displayName:"SearchListGroup___StyledDivider",componentId:"sc-606ry-3"})(["margin:0 !important;"]),M=(0,E.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv",componentId:"sc-606ry-4"})(["margin:0px 1rem 5px 1rem;"]),L=(0,E.ZP)("section").withConfig({displayName:"SearchListGroup___StyledSection",componentId:"sc-606ry-5"})(["display:flex;flex-direction:column;"]),Z=(0,E.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv2",componentId:"sc-606ry-6"})(["margin:1rem 1rem 0.5rem 1rem;display:flex;align-items:center;justify-content:space-around;.ant-input-affix-wrapper{border-radius:2rem !important;border-radius:2rem !important;}"]),q=(0,E.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv3",componentId:"sc-606ry-7"})(["margin-top:0.5rem;flex:1;overflow:auto;"])},99135:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s}),a(61762);var n=a(24746),r=a(198),i=a(47535),o=a(36641),l=a(32834),c=a(88449);function s(){const[e,t]=(0,i.useState)(!0),a=(0,i.useMemo)((()=>new ResizeObserver((e=>{e[0]?.contentRect&&(0,o.d5)({type:"ResizeWindow",height:e[0].contentRect.height,width:e[0].contentRect.width})}))),[]),r=(0,i.useCallback)((e=>{console.log(e),null!=e&&a.observe(e)}),[]);return(0,i.useRef)(null),(0,i.useEffect)((()=>{(0,o.uk)()?((0,o.MT)("SetConfig",(e=>{window.syncManagerConfig=e.syncManagerConfig,t(!1)})),(0,o.d5)({type:"GetConfig"})):(window.syncManagerConfig={dataServerUrl:""},t(!1))}),[]),i.createElement(d,{ref:r},i.createElement("div",{className:"bar"},i.createElement(l.T,null)),e?i.createElement(n.default,{tip:"正在初始化"}):i.createElement(m,{onClickItem:function(e){(0,o.d5)({type:"OpenNewTab",url:e.url})},pageSize:15}))}var d=(0,r.ZP)("section").withConfig({displayName:"Index___StyledSection",componentId:"sc-e7q92-0"})(["width:30rem;"]),m=(0,r.ZP)(c.H).withConfig({displayName:"Index___StyledSearchListGroup",componentId:"sc-e7q92-1"})(["max-height:500px;"])},36641:(e,t,a)=>{"use strict";a.d(t,{MT:()=>o,R6:()=>l,d5:()=>r,nk:()=>c,uk:()=>i});var n=a(10255);function r(e){window!=window.parent&&(window.parent.postMessage(e,"*"),console.log("send msg",e))}function i(){return window!=window.top}function o(e,t){window.addEventListener("message",(a=>{a.data&&a.data.type==e&&t(a.data)}),!1)}function l(e,t,a){return new Promise(((r,i)=>{(0,n.set)(window,a,(e=>{r(e)}));let o=document.getElementById(t);null!=o&&o.remove(),o=document.createElement("script"),o.src=e,o.id=t,o.onerror=e=>{i(e)},document.getElementsByTagName("head")[0].appendChild(o)}))}function c(){let e=screen.availWidth*window.devicePixelRatio,t=screen.availHeight*window.devicePixelRatio;return e>t?t>1200?"UHD":t>1080?"1920x1200":t>768?"1920x1080":e>1280?"1366x768":"1280x768":e>720?"768x1280":e>480?"720x1280":"480x800"}},59401:(e,t,a)=>{var n={"./en-gb":2268,"./en-gb.js":2268,"./zh-cn":78388,"./zh-cn.js":78388};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=59401}}]);