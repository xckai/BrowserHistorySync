(globalThis.webpackChunkreact_simple=globalThis.webpackChunkreact_simple||[]).push([[754],{94748:(e,t,n)=>{var r=n(73003),a=n(53366),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];i.call(e,t)&&a(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},17750:(e,t,n)=>{var r=n(94748),a=n(92544),i=n(19765),o=n(55408),l=n(37073);e.exports=function(e,t,n,s){if(!o(e))return e;for(var c=-1,d=(t=a(t,e)).length,m=d-1,u=e;null!=u&&++c<d;){var p=l(t[c]),g=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=m){var f=u[p];void 0===(g=s?s(f,p,u):void 0)&&(g=o(f)?f:i(t[c+1])?[]:{})}r(u,p,g),u=u[p]}return e}},22118:(e,t,n)=>{var r=n(17750);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},11677:(e,t,n)=>{"use strict";n.d(t,{T:()=>s}),n(39991);var r=n(25751),a=n(75206),i=n(97133),o=n(26826),l=n(77736);function s(){return o.createElement(c,null,o.createElement("div",null,o.createElement(d,{src:l.Z}),o.createElement(m,null,"BrowserHistorySync")),o.createElement(r.default,{className:"home",icon:o.createElement(i.Z,null),shape:"circle",onClick:()=>window.open("/homepage","__blank")}))}var c=(0,a.ZP)("div").withConfig({displayName:"Logo___StyledDiv",componentId:"sc-1c72t62-0"})(["margin-top:.3rem;width:100%;height:2.5rem;display:flex;align-items:center;border-bottom:1px #ddd solid;justify-content:space-between;.home{margin-right:1rem;}"]),d=(0,a.ZP)("img").withConfig({displayName:"Logo___StyledImg",componentId:"sc-1c72t62-1"})(["margin:0 .5rem;height:1.8rem;"]),m=(0,a.ZP)("span").withConfig({displayName:"Logo___StyledSpan",componentId:"sc-1c72t62-2"})(["font-size:90%;font-weight:bold;letter-spacing:0.0625em;color:#5b5b5b;"])},33064:(e,t,n)=>{"use strict";n.d(t,{H:()=>k}),n(80807);var r=n(84766),a=(n(32631),n(93804)),i=(n(79585),n(96510)),o=(n(88598),n(3372)),l=n(76965),s=n.n(l),c=n(3050),d=n.n(c),m=(n(81307),n(63145)),u=(n(11183),n(16383),n(83306)),p=n(26826),g=n(89705),f=n(60911),y=n(90690),h=n(64811),w=n(19099),v=n.n(w),_=n(75206);const x=(0,_.ZP)(u.default).withConfig({displayName:"SearchListGroup__StyledList",componentId:"sc-606ry-0"})(["margin:0.5rem 0rem;"]),b=(0,_.ZP)(u.default.Item).withConfig({displayName:"SearchListGroup__StyledListItem",componentId:"sc-606ry-1"})(["padding:8px 8px 8px 16px !important;.close_btn{visibility:hidden;opacity:0.3;}&:hover{background-color:#e6e5e5;border-radius:3px;.close_btn{visibility:visible;&:hover{color:#40a9ff;opacity:0.9;cursor:pointer;}}}.item_container{display:flex;justify-content:space-between;width:100%;align-items:center;.ant-avatar{min-width:1rem;min-height:1rem !important;width:1rem !important;height:1rem !important;margin-right:0.5rem !important;}}"]);function C(e){return p.createElement(b,{onClick:()=>{e.onClick(e.data)},title:`${e.data.equipmentName} ${v()(e.data.timestamp).format("YYYY-MM-DD HH:mm ")} \n ${e.data.url}`},p.createElement("div",{className:"item_container"},p.createElement(I,{src:e.data.faviconUrl,$_css:e.data.faviconUrl?0:"50%"}),p.createElement("div",{style:{flex:1,width:"calc(100% - 1.7rem)"}},p.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"}},p.createElement("span",{style:{flex:1,fontSize:"90%"}},e.data.title))),p.createElement(g.Z,{className:"close_btn",onClick:t=>{t.preventDefault(),t.stopPropagation(),e.onDeleteBtnClick(e.data)}})))}function S(e){return p.createElement(p.Fragment,null,p.createElement(P,{plain:!0,key:e.groupTitle},e.groupTitle),e.items.map(((t,n)=>p.createElement(C,{data:t,key:t.url+" "+n,onClick:e.onClick,onClickEquipmentTag:e.onClickEquipmentTag,onDeleteBtnClick:e.onDeleteItem}))))}let E=0;function k(e){const[t,n]=(0,p.useState)([]),[r,l]=(0,p.useState)(!1);let[c,u]=(0,p.useState)(""),[g,w]=(0,p.useState)({total:0,current:1});const _=(0,p.useRef)();function b(e){}function C(e){e.id&&h.K.deleteHistoryItem(e.id).then((r=>{let a=t.filter((t=>t.id!==e.id));m.default.success("删除成功"),n([...a])})).catch((e=>{console.error(e),m.default.error(e.message)}))}return(0,p.useEffect)((()=>{l(!0),async function(){h.K.queryHistoryList({keyword:"",pageIndex:g.current,pageSize:e.pageSize}).then((e=>{w({total:e.data.total,current:e.data.current}),n(e.data?.data),l(!1)})).catch((e=>{console.error(e),m.default.error(e.message),l(!1)}))}(),_&&_.current?.focus()}),[]),p.createElement(Z,{className:e.className},p.createElement(N,null,p.createElement(o.default,{ref:_,size:"large",placeholder:"搜索历史访问记录",allowClear:!0,value:c,prefix:p.createElement(f.Z,null),onChange:t=>{let r=t.target.value;u(r),function(t){l(!0),n([]),E&&(clearTimeout(E),E=0),E=setTimeout((function(){h.K.queryHistoryList({keyword:t,pageIndex:1,pageSize:e.pageSize}).then((e=>{w({total:e.data.total,current:e.data.current}),n(e.data?.data),l(!1)})).catch((e=>{console.error(e),m.default.error(e.message),l(!1)}))}),500)}(r)}})),p.createElement(D,{id:"scrollableDiv"},p.createElement(y.Z,{dataLength:t.length,next:function(){r||(l(!0),h.K.queryHistoryList({keyword:c,pageIndex:g.current+1,pageSize:e.pageSize}).then((e=>{w({total:e.data.total,current:e.data.current}),n([...t,...e.data?.data]),l(!1)})).catch((e=>{console.error(e),m.default.error(e.message),l(!1)})))},hasMore:t.length<g.total,loader:!r&&p.createElement("div",{style:{display:"flex",justifyContent:"center",alignContent:"center"}},p.createElement(i.default,null)),endMessage:!r&&p.createElement(a.Z,{plain:!0},"已经到底啦 🤐"),scrollableTarget:"scrollableDiv"},p.createElement(x,{loading:r,itemLayout:"horizontal",size:"small",dataSource:(k=t,d()(s()(k,(e=>v()(e.timestamp).format("YYYY-MM-DD A"))),(e=>({groupTitle:v()(e[0].timestamp).format("YYYY-MM-DD A"),items:e})))),renderItem:t=>p.createElement(S,{key:t.groupTitle,items:t.items,groupTitle:t.groupTitle,onClick:e.onClickItem,onClickEquipmentTag:b,onDeleteItem:C})}))));var k}var I=(0,_.ZP)(r.ZP).withConfig({displayName:"SearchListGroup___StyledAvatar",componentId:"sc-606ry-2"})(["border-radius:",";"],(e=>e.$_css)),P=(0,_.ZP)(a.Z).withConfig({displayName:"SearchListGroup___StyledDivider",componentId:"sc-606ry-3"})(["margin:0 !important;"]),Z=((0,_.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv",componentId:"sc-606ry-4"})(["margin:0px 1rem 5px 1rem;"]),(0,_.ZP)("section").withConfig({displayName:"SearchListGroup___StyledSection",componentId:"sc-606ry-5"})(["display:flex;flex-direction:column;"])),N=(0,_.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv2",componentId:"sc-606ry-6"})(["margin:1rem 1rem 0.5rem 1rem;display:flex;align-items:center;justify-content:space-around;.ant-input-affix-wrapper{border-radius:2rem !important;border-radius:2rem !important;}"]),D=(0,_.ZP)("div").withConfig({displayName:"SearchListGroup___StyledDiv3",componentId:"sc-606ry-7"})(["margin-top:0.5rem;flex:1;overflow:auto;"])},67645:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(75206),a=n(26826),i=n(3853),o=n(11677),l=n(33064);function s(){const[e,t]=(0,a.useState)(!1),n=(0,a.useMemo)((()=>new ResizeObserver((e=>{e[0]?.contentRect&&(0,i.d5)({type:"ResizeWindow",height:e[0].contentRect.height,width:void 0})}))),[]),r=(0,a.useCallback)((e=>{null!=e&&n.observe(e)}),[]);return a.createElement(c,{ref:r},a.createElement("div",{className:"bar"},a.createElement(o.T,null)),!e&&a.createElement(d,{onClickItem:function(e){(0,i.d5)({type:"OpenNewTab",url:e.url})},pageSize:15}))}var c=(0,r.ZP)("section").withConfig({displayName:"Index___StyledSection",componentId:"sc-e7q92-0"})(["width:100%;background:#fff;"]),d=(0,r.ZP)(l.H).withConfig({displayName:"Index___StyledSearchListGroup",componentId:"sc-e7q92-1"})(["max-height:500px;"])},3853:(e,t,n)=>{"use strict";n.d(t,{R6:()=>o,d5:()=>i,nk:()=>l});var r=n(22118),a=n.n(r);function i(e){window!=window.parent&&(window.parent.postMessage(e,"*"),console.log("send msg",e))}function o(e,t,n){return new Promise(((r,i)=>{a()(window,n,(e=>{r(e)}));let o=document.getElementById(t);null!=o&&o.remove(),o=document.createElement("script"),o.src=e,o.id=t,o.onerror=e=>{i(e)},document.getElementsByTagName("head")[0].appendChild(o)}))}function l(){let e=screen.availWidth*window.devicePixelRatio,t=screen.availHeight*window.devicePixelRatio;return e>t?t>1200?"UHD":t>1080?"1920x1200":t>768?"1920x1080":e>1280?"1366x768":"1280x768":e>720?"768x1280":e>480?"720x1280":"480x800"}},53488:(e,t,n)=>{"use strict";n.d(t,{d:()=>f,k:()=>y}),n(48100);var r=n(59827),a=(n(88598),n(3372)),i=(n(26989),n(20450)),o=(n(81307),n(63145)),l=n(75206),s=n(26826),c=n(25123),d=n(86229),m=n.n(d);let u="";window.syncManagerConfig.env="prod",window.syncManagerConfig?.endpoints&&(u=window.syncManagerConfig?.endpoints.prod),m().defaults.baseURL=u??"",m().defaults.withCredentials=!0;let p="";const g=(0,s.createRef)();m().interceptors.response.use((e=>e),(e=>{const t=e.response;if(t)switch(t.status){case 400:return o.default.error(t.data??e.message),Promise.reject(e);case 401:return i.Z.confirm({title:"授权失败，请重新登录",okText:"登录",closable:!1,keyboard:!1,centered:!0,cancelButtonProps:{hidden:!0},onCancel:()=>{window.location.reload()},content:s.createElement(h,null,s.createElement(r.Z.Item,{label:"请输入密码",rules:[{required:!0,message:"Please input your username!"}]},s.createElement(a.default,{ref:g,onChange:({target:{value:e}})=>{p=e},type:"password"}))),icon:s.createElement(c.Z,{style:{color:"#ed1506"}}),onOk:()=>new Promise(((e,t)=>{(new f).login(p).then((t=>{e("ok"),window.location.reload()})).catch((e=>{t(!1)})),g.current.value=""}))}),Promise.reject(e);default:return o.default.error(e.message),Promise.reject(e)}return o.default.error(e.message),Promise.reject(e)}));class f{axiosClient=m();login(e){return m().post("api/Auth/login",`secret=${e}`)}logout(){return m().post("api/Auth/logout").then((e=>{o.default.info("成功登出，您可以关闭该页面"),setTimeout(window.close,2e3)}))}}const y=new f;var h=(0,l.ZP)(r.Z).withConfig({displayName:"baseAuthAxiosService___StyledForm",componentId:"sc-1f7ps0a-0"})(["margin-top:3rem;"])},64811:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(53488);class a extends r.d{async queryHistoryList(e){return console.log(e,"searchParam"),this.axiosClient.get("/api/UrlHistory/Query",{params:{pageIndex:e.pageIndex??1,pageSize:e.pageSize??15,keyword:e.keyword,dateFrom:e?.datetimeFrom?.toISOString(),dateTo:e?.datetimeTo?.toISOString(),equipments:e?.equipmentName}})}async deleteHistoryItem(e){return this.axiosClient.delete(`/api/UrlHistory?id=${e}`)}async batchDeleteHistoryItem(e){return this.axiosClient.delete("/api/UrlHistory/BatchDelete",{data:e})}}const i=new a},77736:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"851378514f50d38c2b60bb0769a84f14.png"},59401:(e,t,n)=>{var r={"./en-gb":22683,"./en-gb.js":22683,"./zh-cn":79261,"./zh-cn.js":79261};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=59401}}]);